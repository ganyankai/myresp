# 前台接口 #

**作者：CAT**

<br>

# 运单、运单项、运单装卸地 #



## 1.车主及车主子账号 - 添加运单项 ##

**备注**

    1.给指定运单添加运单项，即为给运单指定车辆、司机、压货人
    2.同一运单，车辆、司机、压货人唯一。

**URL**
>/font/waybill/addWaybillDetail

**请求参数**

    {
        "params": {
    		"waybillId": "11",        （必填）（int），运单Id
    		"carId": "15",            （必填）（int），车辆Id
    		"driverId": "26",         （必填）（int），司机Id
    		"supercargoId": "27"      （必填）（int），压货人Id
    	},
    	"token": ""                   （必填）
	}

**测试入参**

    {
        "params": {
    		"waybillId": "11",
    		"carId": "15",
    		"driverId": "26",
    		"supercargoId": "27"
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 112,
        "msg": "司机已被分配到当前运单",
        "data": null
    }

    {
        "code": 1,
        "msg": "success",
        "data": "添加成功"
    }

<br>

## 2.车主及车主子账号 - 添加或修改运单装卸地 ##

**备注**

    1.一个运单，针对一个货源装卸地和运单项，只能有一条运单装卸地数据
    2.如果运单装卸地已存在，则更新装卸数量和备注。装卸数量：新数量覆盖原数量。

**URL**
>/font/waybill/addBillLocation

**请求参数**

    {
        "params": {
    		"waybillId": "11",        （必填）（int），运单Id
    	    "cargoLocationId": "5",   （必填）（int），货源装卸地Id
		    "waybillDetailId": "10",  （必填）（int），运单项Id
		    "remark": "remark",       （选填）（str），备注
		    "qty": "10"               （必填）（int），装卸数量
    	},
    	"token": ""                   （必填）
	}

**测试入参**

    {
        "params": {
    		"waybillId": "11",
    	    "cargoLocationId": "5",
		    "waybillDetailId": "10",
		    "remark": "remark",
		    "qty": "10"
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": null
    }

<br>


## 3.车主及车主子账号 - 删除运单项 ##

**备注**

    1.同步删除运单项下的运单装卸地

**URL**
>/font/waybill/deleteWaybillDetail

**请求参数**

    {
        "params": {
    	    "id": "5"          （必填）（int），运单项Id
    	},
    	"token": ""            （必填）
	}

**测试入参**

    {
        "params": {
    		"id": "11",
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "删除成功"
    }

<br>

## 4.车主及车主子账号 - 删除运单装卸地 ##

**备注**


**URL**
>/font/waybill/deleteBillLocation

**请求参数**

    {
        "params": {
    	    "id": "5"          （必填）（int），运单装卸地Id
    	},
    	"token": ""            （必填）
	}

**测试入参**

    {
        "params": {
    		"id": "11",
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "删除成功"
    }

<br>

## 5.车主及车主子账号 - 运单分页 ##

**备注**


**URL**
>/font/waybill/myWaybill

**请求参数**

    {
        "params": {
    		"id": "11",                       （选填）（int），运单Id
    		"createBy": "68",                 （选填）（int），创建人Id
    		"cargoOwnerName": "",             （选填）（str），货主企业名称
    		"cargoOwnerId": "4",              （选填）（int），货主Id
    		"cargoId": "1",                   （选填）（int），货源Id
    		"billNo": "77",                   （选填）（str），运单号
    		"payType": "wechat",              （选填）（str），支付类型（字典取值）   
    		"payWay": "arrival_pay",          （选填）（str），支付方式（字典取值）   
    		"billType": "",                   （选填）（str），运单类型（字典取值）   
    		"status": "await_loading"         （选填）（str），运单状态（字典取值）   
    	},
    	"page": {
    		"pageNum": "1",    （必填）
    		"pageSize": "10"   （必填）
    	}
    	"token": ""            （必填）
	}

**测试入参**

    {
        "params": {
    		"id": "11",
    		"createBy": "68",
    		"carOwnerName": "公司",
    		"carOwnerId": "3",
    		"cargoOwnerName": "公司",
    		"cargoOwnerId": "4",
    		"cargoId": "1",
    		"billNo": "77",
    		"payType": "wechat",
    		"payWay": "arrival_pay",
    		"billType": "",
    		"status": "await_loading"
    	},
    	"page": {
    		"pageNum": "1",
    		"pageSize": "10"
    	}
    	"token": ""            （必填）
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": {
            "total": 1,
            "list": [
                {
                    "id": 11,
                    "billNo": "2019030700012060177",
                    "cargoId": 1,
                    "cargoName": null,
                    "cargo": null,
                    "cargoOwnnerId": 4,
                    "cargoOwnerName": "武汉XX公司",
                    "carOwnnerId": 3,
                    "createBy": 68,
                    "carOwnerName": "武汉XX公司",
                    "advanceMoeny": 1121,
                    "finalMoney": 1224,
                    "totalMoney": 1278,
                    "payType": "wechat",
                    "payTypeCN": "微信支付",
                    "payWay": "arrival_pay",
                    "payWayCN": "货到付款",
                    "remark": "订单测试123",
                    "qty": 450,
                    "weightUnit": "ton",
                    "weightUnitCN": "吨",
                    "billType": null,
                    "billTypeCN": null,
                    "proofImgs": null,
                    "status": "await_loading",
                    "statusCN": "待装货",
                    "createDate": "2019-03-07 16:41:00",
                    "waybillDetails": null,
                    "evaluates": null
                }
            ],
            "pageNo": 1,
            "pageSize": 10
        }
    }


<br>

## 6.车主及车主子账号 - 运单详情 ##

**备注**


**URL**
>/font/waybill/details

**请求参数**

    {
        "params": {
    		"id": "11"         （必填）（int），运单Id
    	},
    	"token": ""            （必填）
	}

**测试入参**

    {
        "params": {
    		"id": "11"
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": {
            "id": 11,
            "billNo": "2019030700012060177",
            "cargoId": 1,
            "cargoName": null,
            "cargo": {                              // 货源
                "id": 1,
                "name": "甲烷",
                "logo": "/img/logo.png",
                "qty": 10000,
                "weightUnit": "ton",
                "weightUnitCN": "吨",
                "tenderWay": "bid_mark",
                "tenderWayCN": "抢标",
                "payType": "wechat",
                "payTypeCN": "微信支付",
                "mulShipment": true,
                "mulShipmentList": null,
                "mulUnload": true,
                "mulUnloadList": null,
                "packaged": true,
                "matterPrice": 100,
                "realPrice": 100,
                "marketPrice": 100,
                "priceUnit": "price_yuan",
                "priceUnitCN": null,
                "priceType": "fixed_price",
                "priceTypeCN": "固定价",
                "startProvince": "湖北省",
                "startCity": "孝感市",
                "startCountry": "红安县",
                "endProvince": "广东省",
                "endCity": "广州市",
                "endCountry": "东湾区",
                "line": "孝感市-->广州市",
                "canShare": false,
                "carType": "car_tractor",
                "carTypeCN": "牵引车",
                "status": "source_up",
                "statusCN": "竞价中",
                "arrivalDate": "2019-02-20 14:11:59",
                "pickupDate": "2019-02-20 14:11:57",
                "endDate": "2019-02-20 14:12:04",
                "remark": "液体油运送",
                "createBy": 69,
                "createDate": "2019-02-20 14:12:08",
                "userAccount": null,
                "tel": null,
                "totalPrice": null
            },
            "cargoOwnnerId": 4,
            "cargoOwnerName": "武汉XX公司",
            "carOwnnerId": 3,
            "createBy": 68,
            "carOwnerName": "武汉XX公司",
            "advanceMoeny": 1121,
            "finalMoney": 1224,
            "totalMoney": 1278,
            "payType": "wechat",
            "payTypeCN": "微信支付",
            "payWay": "arrival_pay",
            "payWayCN": "货到付款",
            "remark": "订单测试123",
            "qty": 450,
            "weightUnit": "ton",
            "weightUnitCN": "吨",
            "billType": null,
            "billTypeCN": null,
            "proofImgs": null,
            "status": "await_loading",
            "statusCN": "待装货",
            "createDate": "2019-03-07 16:41:00",
            "waybillDetails": [                     // 运单项
                {
                    "id": 14,
                    "billNo": "2019030700012060177",
                    "carId": 15,
                    "driverId": 26,
                    "supercargoId": 27,
                    "qty": null,
                    "weightUnit": "ton",
                    "weightUnitCN": "吨",
                    "flowName": null,
                    "flowNameCN": null,
                    "createDate": "2019-04-01 17:43:23",
                    "billLocations": [              // 运单装卸地
                        {
                            "id": 13,
                            "waybillDetailId": 14,
                            "waybillId": 11,
                            "longitude": null,
                            "latitude": null,
                            "province": "湖北省",
                            "city": "孝感市",
                            "county": "红安县",
                            "addressDetail": "湖北省孝感市大悟县新城镇吴冲存",
                            "qty": 10,
                            "weightUnit": "ton",
                            "type": "loading_type",
                            "seqNo": 1,
                            "remark": "remark",
                            "loadDate": "2019-03-10 14:11:59",
                            "endDate": "2019-03-15 14:11:59",
                            "status": "default",
                            "cargoLocationId": 5,
                            "createDate": "2019-04-01 17:43:30"
                        }
                    ]
                }
            ],
            "evaluates": []                     // 评论，暂无数据
        }
    }