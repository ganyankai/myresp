
# 前台 - 车源 车主端接口 #

**作者：CAT**    



<br><br><br>


## 1.车主及车主子账号 - 发布车源 ##

**备注**
    
    1.起止地至少指定一个，车辆、司机、压货人可以为空。

**URL**
>/api/carSource/add

**请求参数**

    {
    	"params": {
            "qty": "",                    （必填）（int） 运输量
            "unit": "",                   （必填）（str） 运输量单位
            "carType": "",                （必填）（str） 车辆类型
            "carRecordPlaces": [{          // 车源起止地，可以有多个，至少一个。
                "startProvince": "",      （必填）（str） 出发省
                "startCity": "",          （必填）（str） 出发市
                "startCountry": "",       （必填）（str） 出发县
                "endProvince": "",        （必填）（str） 到达省
                "endCity": "",            （必填）（str） 到达市
                "endCountry": ""          （必填）（str） 到达县
             }],
            "carSourceCars": [{            // 车源的车辆司机压货人，可以有多个，可以为空。
                "carId": "",              （必填）（str） 车辆Id
                "driverId": "",           （必填）（str） 司机Id
                "supercargoId": ""        （必填）（str） 压货人Id
             }]
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "添加成功"
    }

<br><br><br>


## 2.车主及车主子账号 - 修改车源基本信息 ##

**备注**

    1.修改车源基本信息字段，如果车主非免审核，同时修改状态为【待审核】

**URL**
>/api/carSource/updateCheck

**请求参数**

    {
    	"params": {    
            "id": "",                  （必填）（int） 车源Id
            "qty": "",                 （必填）（int） 运输量
            "unit": "",                （必填）（str） 运输量单位
            "carType": ""              （必填）（str） 车辆类型
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "修改成功"
    }

<br><br><br>


## 3.车主及车主子账号 - 提交审核 ##

**备注**

    1.仅【下架】状态可以提交审核
    2.如果车主免审核，状态直接修改为【上架】

**URL**
>/api/carSource/submitAudit

**请求参数**

    {
    	"params": {    
            "id": "",                  （必填）（int） 车源Id
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "提交审核成功"
    }

<br><br><br>


## 4.车主及车主子账号 - 车源分页 ##

**备注**


**URL**
>/api/carSource/page

**请求参数**

    {
    	"params": {    
            "status": ""              （选填）（str） 状态
    	},
        "page":{
    		"pageSize":"10",
    		"pageNum":"1"
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": {
            "total": 2,
            "list": [
                {                                       【车源基本信息】
                    "id": 8,
                    "createBy": 1,
                    "userName": "admin",                // 创建人名称
                    "carOwnerId": null,
                    "carOwnerName": null,
                    "carType": "car_type",
                    "carTypeCN": "车辆类型，待处理",
                    "qty": 100,
                    "unit": "ton",
                    "status": "up",
                    "statusCN": "状态，待处理",
                    "createDate": "2019-03-01 10:14:40",
                    "carRecordPlaces": [                【车辆起止地】
                        {
                            "id": 11,
                            "carSourceId": 8,
                            "startProvince": "浙江",
                            "startCity": "杭州",
                            "startCountry": "下城区",
                            "endProvince": "湖北",
                            "endCity": "武汉",
                            "endCountry": "江夏区"
                        }
                    ],
                    "carSourceCars": null
                }
            ],
            "pageNo": 1,
            "pageSize": 2
        }
    }

<br><br><br>


## 5.车主及车主子账号 - 车源详情 ##

**备注**


**URL**
>/api/carSource/details

**请求参数**

    {
    	"params": {    
            "id": ""              （必填）（int） 车源Id
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": {
            "id": 8,
            "createBy": 1,
            "userName": "admin",
            "carOwnerId": 1,
            "carOwnerName": null,
            "carType": "car_type",
            "carTypeCN": "车辆类型，待处理",
            "qty": 100,
            "unit": "ton",
            "status": "up",
            "statusCN": "状态，待处理",
            "createDate": "2019-03-01 10:14:40",
            "carRecordPlaces": [                    【车辆起止地】
                {
                    "id": 11,
                    "carSourceId": 8,
                    "startProvince": "浙江",
                    "startCity": "杭州",
                    "startCountry": "下城区",
                    "endProvince": "湖北",
                    "endCity": "武汉",
                    "endCountry": "江夏区"
                }
            ],
            "carSourceCars": [                      【车源车辆、司机、压货人】
                {
                    "id": 10,
                    "carSourceId": 8,
                    "carId": 1,
                    "driverId": 1,
                    "supercargoId": 2
                }
            ]
        }
    }

<br><br><br>


## 6.车主及车主子账号 - 修改、新增车源起止地 ##

**备注**
    
    1.当 carRecordPlaces 下的 id 为空时表示新增数据，当id不为空时，表示更新现有数据。

**URL**
>/api/carSource/saveLine

**请求参数**

    {
    	"params": {
            "carSourceId": "",            （必填）（int） 车源Id
            "carRecordPlaces": [{          // 车源起止地，可以有多个，至少一个。
                "id": "",                 （选填）（int） 起止地Id
                "startProvince": "",      （必填）（str） 出发省
                "startCity": "",          （必填）（str） 出发市
                "startCountry": "",       （必填）（str） 出发县
                "endProvince": "",        （必填）（str） 到达省
                "endCity": "",            （必填）（str） 到达市
                "endCountry": ""          （必填）（str） 到达县
             }]
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "起止地修改成功"
    }

<br><br><br>


## 7.车主及车主子账号 - 修改、新增车源车辆、司机、压货人 ##

**备注**
    
    1.当 carSourceCars 下的 id 为空时表示新增数据，当id不为空时，表示更新现有数据。
    2.参数 carId、driverId、supercargoId 不能同时为空

**URL**
>/api/carSource/saveCarSourceCar

**请求参数**

    {
    	"params": {
            "carSourceId": "",           （必填）（int） 车源Id
            "carSourceCars": [{          // 车源的车辆、司机、压货人，可以有多个，至少一个。
                "id": "",                （选填）（int） 车源车辆关系表Id
                "carId": "",             （选填）（int） 车辆Id
                "driverId": "",          （选填）（int） 司机Id
                "supercargoId": ""       （选填）（int） 压货人Id
             }]
    	},
    	"token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "车辆修改成功"
    }

<br><br><br><br>







