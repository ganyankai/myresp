
# 前台 - 车源 （车主端接口） #

**作者：CAT**    


<br><br>


## 1.车主及车主子账号 - 发布车源 ##

**备注**
    
    1.起止地至少指定一个，当前只允许一个起止地。车辆、司机、压货人可以为空。

**URL**
>/api/carSource/add

**请求参数**

    {
    	"params": {
            "carType": "",                （必填）（str） 车辆类型（字典取值）
            "qty": "",                    （必填）（int） 运输量
            "unit": "",                   （必填）（str） 运输量单位（字典取值）
            "carRecordPlaces": [{          // 车源起止地，可以有多个，至少一个。当前只允许一个起止地。
                "startProvince": "",      （必填）（str） 出发省
                "startCity": "",          （必填）（str） 出发市
                "startCountry": "",       （必填）（str） 出发县
                "endProvince": "",        （必填）（str） 到达省
                "endCity": "",            （必填）（str） 到达市
                "endCountry": ""          （必填）（str） 到达县
             }],
            "carSourceCars": [{            // 车源的车辆、司机、压货人，可以有多个，可以为空。
                "carId": "",              （必填）（str） 车辆Id
                "driverId": "",           （必填）（str） 司机Id
                "supercargoId": ""        （必填）（str） 压货人Id
             }]
    	},
    	"token": ""
	}
	
**测试入参**

	{
	    "params": {
	        "carType": "car_tractor",
	        "qty": "10",
	        "unit": "ton",
	        "carRecordPlaces": [
	            {
	                "startProvince": "湖北省",
	                "startCity": "武汉市",
	                "startCountry": "江夏区",
	                "endProvince": "浙江省",
	                "endCity": "杭州市",
	                "endCountry": "下城区"
	            }
	        ],
	        "carSourceCars": [
	            {
	                "carId": "",
	                "driverId": "",
	                "supercargoId": ""
	            }
	        ]
	    },
	    "token": ""
	}

**响应示例**

	{
	    "code": 1,
	    "msg": "success",
	    "data": "添加成功"
	}

<br><br>


## 2.车主及车主子账号 - 修改车源基本信息需要审核的字段 ##

**备注**


**URL**
>/api/carSource/updateNeedApprove

**请求参数**

    {
    	"params": {    
            "id": "",                  （必填）（int） 车源Id
            "carType": "",             （必填）（str） 车辆类型
            "qty": "",                 （必填）（int） 运输量
            "unit": ""                 （必填）（str） 运输量单位
    	},
    	"token": ""
	}

**测试入参**

	{
	    "params": {
	        "id": "16",
	        "carType": "car_tractor",
	        "qty": "100",
	        "unit": "litre"
	    },
	    "token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "修改成功"
    }

<br><br>


## 3.车主及车主子账号 - 我的车源分页 ##

**备注**


**URL**
>/api/carSource/myCarSourcePage

**请求参数**
	
	{
	    "params": {
	        "status": "",				（选填）（str） 车源状态（字典取值）
	        "approveStatus": ""			（选填）（str） 审批状态（字典取值）
	    },
	    "page": {
	        "pageSize": "10",
	        "pageNum": "1"
	    },
	    "token": ""
	}
	
**测试入参**	

	{
	    "params": {
	        "status": "uncertified",
	        "approveStatus": "approval_pending"
	    },
	    "page": {
	        "pageSize": "10",
	        "pageNum": "1"
	    },
	    "token": ""
	}

**响应示例**

    {
	    "code": 1,
	    "msg": "success",
	    "data": {
	        "total": 1,
	        "list": [
	            {
	                "id": 16,
	                "createBy": 1,
	                "userName": null,							// 创建人名称
	                "carOwnerId": 10,
	                "carOwnerName": "中软云科技有限公司",			// 车主企业名称
	                "carType": "car_tractor",
	                "qty": 10,
	                "unit": "ton",
	                "status": "uncertified",
	                "createDate": "2019-03-25 14:07:16",
	                "carRecordPlaces": [						// 车源的起止地
	                    {
	                        "id": 30,
	                        "carSourceId": 16,
	                        "startProvince": "湖北省",
	                        "startCity": "武汉市",
	                        "startCountry": "江夏区",
	                        "endProvince": "浙江省",
	                        "endCity": "杭州市",
	                        "endCountry": "下城区"
	                    }
	                ],
	                "carSourceCars": null,						// 车源的车辆、司机、压货人，分页时不返回
	                "approveStatus": "approval_pending",
	                "approveContentCN": null,					// 车源的审批内容，分页时不返回
	                "unitCN": "吨",
	                "statusCN": "未认证",
	                "carTypeCN": "牵引车",
	                "approveStatusCN": "待审批"
	            }
	        ],
	        "pageNo": 1,
	        "pageSize": 10
	    }
	}

<br><br>


## 4.车主及车主子账号 - 车源详情 ##

**备注**


**URL**
>/api/carSource/details

**请求参数**

    {
    	"params": {    
            "id": ""	（必填）（int） 车源Id
    	},
    	"token": ""
	}
	
**测试入参**

	{
	    "params": {
	        "id": "16"
	    },
	    "token": ""
	}

**响应示例**

	{
	    "code": 1,
	    "msg": "success",
	    "data": {
	        "id": 16,
	        "createBy": 1,
	        "userName": "admin",						// 创建人名称
	        "carOwnerId": 10,
	        "carOwnerName": "中软云科技有限公司",			// 车主企业名称
	        "carType": "car_tractor",
	        "qty": 10,
	        "unit": "ton",
	        "status": "uncertified",
	        "createDate": "2019-03-25 14:07:16",
	        "carRecordPlaces": [						// 车源的起止地
	            {
	                "id": 30,
	                "carSourceId": 16,
	                "startProvince": "湖北省",
	                "startCity": "武汉市",
	                "startCountry": "江夏区",
	                "endProvince": "浙江省",
	                "endCity": "杭州市",
	                "endCountry": "下城区"
	            }
	        ],
	        "carSourceCars": [							// 车源的车辆、司机、压货人
	            {
	                "id": 23,
	                "carSourceId": 16,
	                "carId": 1,
	                "driverId": 1,
	                "supercargoId": 2
	            }
	        ],
	        "approveStatus": "approval_pending",
	        "approveContentCN": {						// 车源的审批内容
	            "id": null,
	            "carType": "car_tractor",
	            "qty": 10,
	            "unit": "ton"
	        },
	        "approveStatusCN": "待审批",
	        "unitCN": "吨",
	        "statusCN": "未认证",
	        "carTypeCN": "牵引车"
	    }
	}

<br><br>


## 5.车主及车主子账号 - 修改起止地（包含起止地的更新和添加） ##

**备注**
    
    1.当 carRecordPlaces 下的 id 为空时表示新增数据，当id不为空时，表示更新现有数据。
    2.暂定只允许有一个起止地，但是此处是可以新增起止地的，最终会导致起止地数据不止一条，为方便测试，暂时开放新增起止地。

**URL**
>/api/carSource/saveLine

**请求参数**

    {
    	"params": {
            "carSourceId": "",            （必填）（int） 车源Id
            "carRecordPlaces": [
            	{          					   // 车源起止地，可以有多个，至少一个。
	                "id": "",                 （选填）（int） 起止地Id
	                "startProvince": "",      （必填）（str） 出发省
	                "startCity": "",          （必填）（str） 出发市
	                "startCountry": "",       （必填）（str） 出发县
	                "endProvince": "",        （必填）（str） 到达省
	                "endCity": "",            （必填）（str） 到达市
	                "endCountry": ""          （必填）（str） 到达县
             	}
             ]
    	},
    	"token": ""
	}
	
**测试入参**

	{
	    "params": {
	        "carSourceId": "16",
	        "carRecordPlaces": [
	            {
	                "id": "",
	                "startProvince": "湖北省",
	                "startCity": "武汉市",
	                "startCountry": "江夏区",
	                "endProvince": "浙江省",
	                "endCity": "杭州市",
	                "endCountry": "下城区"
	            }
	        ]
	    },
	    "token": ""
	}

**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "修改成功"
    }

<br><br>


## 6.车主及车主子账号 - 修改车辆（包含车辆的更新和添加） ##

**备注**
    
    1.当 carSourceCars 下的 id 为空时表示新增数据，当id不为空时，表示更新现有数据。
    2.参数 carId、driverId、supercargoId 不能同时为空

**URL**
>/api/carSource/saveCarSourceCar

**请求参数**

    {
    	"params": {
            "carSourceId": "",           	 （必填）（int） 车源Id
            "carSourceCars": [
            	{          					  // 车源的车辆、司机、压货人，可以有多个，至少一个。
	                "id": "",                （选填）（int） 车源车辆关系表Id
	                "carId": "",             （选填）（int） 车辆Id
	                "driverId": "",          （选填）（int） 司机Id
	                "supercargoId": ""       （选填）（int） 压货人Id
             	}
             ]
    	},
    	"token": ""
	}
	
**测试入参**

	{
	    "params": {
	        "carSourceId": "16",
	        "carSourceCars": [
	            {
	                "id": "",
	                "carId": "1",
	                "driverId": "1",
	                "supercargoId": "2"
	            }
	        ]
	    },
	    "token": ""
	}
	
**响应示例**

    {
        "code": 1,
        "msg": "success",
        "data": "修改成功"
    }

<br><br>

